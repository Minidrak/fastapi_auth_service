# fastapi_auth_service

## üåü –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **JWT-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** —Å —Ä–æ–ª–µ–≤–æ–π –º–æ–¥–µ–ª—å—é (user/admin)
- **OAuth2-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã**: Yandex (–ë–µ–∑ VK)
- **–ò—Å—Ç–æ—Ä–∏—è –≤—Ö–æ–¥–æ–≤** —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –º–µ—Ç–æ–¥–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ –Ω–æ–≤—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è—Ö (—á–µ—Ä–µ–∑ Kafka)

![](image.png)

–í—Å–µ–≥–æ 6 –º–∞—Ä—à—Ä—É—Ç–æ–≤
1. –ú–µ—Ç–æ–¥ POST –ø—É—Ç—å: /api/v1/auth/register - –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ú–µ—Ç–æ–¥ POST –ø—É—Ç—å: /api/v1/auth/token - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
3. –ú–µ—Ç–æ–¥ GET –ø—É—Ç—å: /api/v1/login/yandex - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å
4. –ú–µ—Ç–æ–¥ GET –ø—É—Ç—å: /api/v1/login/yandex/callback - –ü–µ—Ä–µ–Ω–∞–ø—Ä—è–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —ç—Ç–æ—Ç endpoint, –∫–æ–≥–¥–∞ –æ–Ω –≤–æ–π–¥–µ—Ç —á–µ—Ä–µ–∑ —è–Ω–¥–µ–∫—Å —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º code, –ø–æ —ç—Ç–æ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É –¥–æ—Å—Ç–∞–µ—Ç—Å—è access_token –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. –ú–µ—Ç–æ–¥ GET –ø—É—Ç—å: /api/v1/admin/users/{user_id}/roles - –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–¥–º–∏–Ω–æ–º –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∏—Ö —Ä–æ–ª–µ–π
6. –ú–µ—Ç–æ–¥ GET –ø—É—Ç—å: /api/v1/admin/history - –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–¥–º–∏–Ω–æ–º –∏—Å—Ç–æ—Ä–∏–∏ –≤—Å–µ—Ö –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–π

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–ª—Å—è, –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–º –∫–∞–Ω–∞–ª –ø—É–±–ª–∏—á–Ω—ã–π –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ –æ–± –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ kafka.

![](image-1.png)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–í —Ñ–∞–π–ª–µ .env –∑–∞–ø–∏—Å–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞:
```sh
docker-compose up --build
```
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```sh
docker exec -it fastapi_auth_service-db-1 bash
```

–î–∞–ª—å—à–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–∫–µ—Ä–∞:

```sh
psql -U your_user_name -d your_db_name
```

